# manual-shell

### 유닉스 리눅스 쉘 스크립트 예제사전
### 오스미 유스케
### 132 가지

001. 명령어옵션처리하기  
./001_getopts.sh -a -p '===sep===' /home/user1/docs

002. 키보드에서 ctrl + C 입력 시, 현재 상태를 출력하며 종료하기
./002_sigint.sh http://www.example.org/

a. ctrl + C를 입력시 쉘 스크립트 프로세스에 SIGINT라는 시그널이 전달됩니다.
b. SIGINT를 받은 쉘 스크립트 프로세스는 키보드에서 인터럽트가 발생했다고 알립니다.
c. 키보드인터럽트의 기본 동작은 프로세스 종료이므로 쉘 스크립트는 실행종료됩니다.
*** 옵션이 궁금하면 : kill -l
*** trap '' INT 면 키보드입력으로 종료불가.다른 터미널로 꺼야함

003. 키보드에서 입력받은 값을 써서 대화형 처리
./003_read.sh

004. 암호 입력 시 사용자 키 입력을 표시하지 않기
./004_pass_wget.sh

read 명령어로 입력한 문자가 화면에 표시되는건, 에코백이 켜져잇기때문
에코백을 끄는게(off) 보통
stty -echo : 안보이게하기 
stty echo : 다시복원시키기

008. 표시문자색 변경하기

\033[파라미터m 표시할 문자열 \033[0m
이스케이스 시퀀스 참조
man console_codes

010. pv
sudo apt-get install pv
Pipe Viewer로 데이터 흐름의 가시화

055. 디폴트게이트웨이 ping이 통하는지 확인하기(리눅스)
표준출력 및 표준에러출력은 /dev/null로 리다이렉션해서 버리기
route -n은 현재 경로테이블을 호스트명이 아닌 IP주소로 표시합니다.
셀 특수변수 $?는 종료 스테이터스가 들어있으므로, 해당 값으로 성공,실패확인가

057. ping으로 특정 호스트 응답 평균 시간을 취득하기
rtt는 round trip time의 줄임말로, avg값이 평균 왕복시간
$$는 셀특수변수로 프로세스 ID가 들어가므로 임시파일 만들 떄 파일명으로 자주사용
awk 사용시 한줄이 길어지면 \로 줄바꿈 추가
sed 명령어로 패턴 일치한 부분만 출력하는 방법
NR은 awk의 내장변수로 입력한 레코드 수를 나타냅니다.

059. 대규모 사이트라면 부하분산을 위해 동일한 FQDN(전체 주소 도메인 이름 : Fully Qualified Domain Name)
에 여러 IP 주소를 가질 때가 많으며, www.google.com에 대해서도 여러 IP주소가 표시됩니다.
마지막 칼럼 추출 시, 변수NF를 사용

060. ip에서 도메인 찾기
./060_ip.sh ip.txt

061. 서버의 특정 포트가 열려있는지 확인하는 스크립트

네트워크 방화벽 설정이 바른지 확인하는 스크립트

063. ftp로 자동내려받기, 자동오리기
-n은 FTP의 자동화옵션
EOT은 End of Text의 줄임말

인트라넷은 ftp
인터넷은 scp, sftp

111. 특정 프로세스가 정지했는지 감시하기
서비스 제공 시 존재해야할 프로세스가 정지하지 않았는지 감시하고 싶을때
alert.sh은 통지메일을 송신하는 등 경고처리를 하는 스크립트

ps ax -o command : 자신 이외의 사용자 프로세스정보도 표시, 제어 터미널이 없는 프로세스도 표시
$() : 치환명령어, 셀변수 대입
wc -l : 줄세는 옵션
grep -v "^grep" : 패턴을 포함한 줄을 제거하는 옵션


123. 로그 출력을 감시해서 로그에 특정 문자열이 있으면 경고하기
tail, read
-f 옵션을 이용하면 변경 전 파일을 계속 읽기 때문에 새로운 application.log에 추가되는걸 검출할수 없음
-F 옵션을 이용하면, tail 명령어는 정기적으로 해당파일을 다시 열기때문에 로그 로테이션 대응 가능

less
계속 추가되는 로그파일을 감시

space : 아래
b : 앞으로
f : 파일 끝을 계쏙 읽음. (Wating for data)
ctrl + c, q

성공 ,39.114.235.247 - - [18/Nov/2020:21:49:12 +0000] "GET / HTTP/1.1" 200 3477 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36"

104. 서버 네트워크 인터페이스와 IP 주소 목록 얻기
LANG=C 영어로 표기하기

